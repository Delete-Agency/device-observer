{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/device-observer.js","webpack:///./index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","device_observer","DeviceObserver","_classCallCheck","this","_inited","_devices","_ascendingDevicesArray","_deviceName","_deviceIndex","_deviceChangeCallbacks","_resizeCallbacks","_debounceTimeoutId","devices","options","arguments","length","undefined","_setDevicesData","_resizeDebounce","resizeDebounce","_mobileFirst","mobileFirst","_updateDeviceData","window","addEventListener","_onWindowResize","keys","map","deviceName","sort","a","b","Error","clearTimeout","setTimeout","_handleWindowResize","oldDeviceType","_invokeResize","_invokeDeviceChange","indexOf","concat","join","Infinity","currentDevice","_this","_checkDevices","_toConsumableArray","reverse","find","deviceData","_isGreaterOrEqual","_isLowerOrEqual","forEach","cb","newDeviceType","pixelsValue","matchMedia","matches","findIndex","_this2","push","filter","storedCb","_this3","operator","isMatch","isGt","isGe","isLt","isLe","_checkDeviceNameRegistered","_getDeviceNameIndex","__webpack_exports__"],"mappings":"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","file":"device-observer.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const DEFAULT_RESIZE_DEBOUNCE = 100;\r\n\r\nclass DeviceObserver {\r\n    constructor() {\r\n        this._inited = false;\r\n        this._devices = {};\r\n        this._ascendingDevicesArray = [];\r\n        this._deviceName = null;\r\n        this._deviceIndex = null;\r\n        this._deviceChangeCallbacks = [];\r\n\r\n        this._resizeCallbacks = [];\r\n        this._debounceTimeoutId = null;\r\n    }\r\n\r\n    /**\r\n     * @param {Object} devices - Collection of devices and its breakpoints from which they start\r\n     * For example: {\r\n     *   'mobile': 0,\r\n     *   'tablet': 768,\r\n     *   'desktop:' 1024,\r\n     * }\r\n     * @param {Object} options\r\n     */\r\n    init(devices, options = {}) {\r\n        this._setDevicesData(devices);\r\n        this._resizeDebounce = 'resizeDebounce' in options ? options.resizeDebounce : DEFAULT_RESIZE_DEBOUNCE;\r\n        this._mobileFirst = 'mobileFirst' in options ? options.mobileFirst : true;\r\n        this._updateDeviceData();\r\n\r\n        if (!this._inited) {\r\n            this._inited = true;\r\n            window.addEventListener('resize', this._onWindowResize.bind(this));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Apply desired format and save to the private variable\r\n     * @param devices\r\n     * @private\r\n     */\r\n    _setDevicesData(devices) {\r\n        // save original devices\r\n        this._devices = devices;\r\n        // prepare an array of devices\r\n        // make sure devices are sorted by breakpoints values [['mobile', 0], ['tablet', 768], ['desktop', 1024]]\r\n        this._ascendingDevicesArray = Object.keys(devices).map((deviceName) => [deviceName, devices[deviceName]]).sort((a, b) => a[1] - b[1]);\r\n\r\n        if (this._ascendingDevicesArray.length === 0) {\r\n            throw new Error('No devices specified');\r\n        }\r\n    }\r\n\r\n    _onWindowResize() {\r\n        if (this._debounceTimeoutId !== null) {\r\n            clearTimeout(this._debounceTimeoutId);\r\n        }\r\n\r\n        this._debounceTimeoutId = setTimeout(this._handleWindowResize.bind(this), this._resizeDebounce);\r\n    }\r\n\r\n    _handleWindowResize() {\r\n        const oldDeviceType = this._deviceName;\r\n        this._updateDeviceData();\r\n        this._invokeResize();\r\n        if (oldDeviceType !== this._deviceName) {\r\n            this._invokeDeviceChange(this._deviceName, oldDeviceType);\r\n        }\r\n    }\r\n\r\n    _checkDeviceNameRegistered(deviceName) {\r\n        if (Object.keys(this._devices).indexOf(deviceName) === -1) {\r\n            throw new Error(`Passes device name ${deviceName} was not found among registered: ${Object.keys(this._devices).join(', ')}`)\r\n        }\r\n    }\r\n\r\n    _checkDevices() {\r\n        if (this._ascendingDevicesArray.length === 0) {\r\n            throw new Error('No devices specified');\r\n        }\r\n\r\n        if (this._mobileFirst && this._ascendingDevicesArray[0][1] !== 0) {\r\n            throw new Error('The smallest device must have breakpoint equal 0 in case mobile-first approach is used');\r\n        }\r\n\r\n        if (!this._mobileFirst && this._ascendingDevicesArray[this._ascendingDevicesArray.length - 1][1] !== Infinity) {\r\n            throw new Error('The greatest device name must have breakpoint equal Infinity in case desktop-first approach is used');\r\n        }\r\n    }\r\n\r\n    _updateDeviceData() {\r\n        this._checkDevices();\r\n\r\n        let currentDevice;\r\n        if (this._mobileFirst) {\r\n            // reverse array because of mobile-first\r\n            // create the new array before reverse not to mutate original one\r\n            currentDevice = [...this._ascendingDevicesArray].reverse().find(deviceData => this._isGreaterOrEqual(deviceData[1]));\r\n        } else {\r\n            currentDevice = this._ascendingDevicesArray.find(deviceData => this._isLowerOrEqual(deviceData[1]));\r\n        }\r\n\r\n        this._deviceIndex = this._ascendingDevicesArray.indexOf(currentDevice);\r\n        this._deviceName = currentDevice[0];\r\n    }\r\n\r\n    _invokeResize() {\r\n        this._resizeCallbacks.forEach(cb => cb());\r\n    }\r\n\r\n    _invokeDeviceChange(newDeviceType, oldDeviceType) {\r\n        this._deviceChangeCallbacks.forEach(cb => cb(newDeviceType, oldDeviceType));\r\n    }\r\n\r\n    _isGreaterOrEqual(pixelsValue) {\r\n        return matchMedia(`only screen and (min-width:${pixelsValue}px)`).matches;\r\n    }\r\n\r\n    _isLowerOrEqual(pixelsValue) {\r\n        // convert Infinity to some really big number\r\n        // to make sure matchMedia below returns true in that case\r\n        if (pixelsValue === Infinity) {\r\n            pixelsValue = 100000;\r\n        }\r\n        return matchMedia(`only screen and (max-width:${pixelsValue}px)`).matches;\r\n    }\r\n\r\n    _getDeviceNameIndex(deviceName) {\r\n        return this._ascendingDevicesArray.findIndex(deviceData => deviceData[0] === deviceName);\r\n    }\r\n\r\n    subscribeOnResize(cb) {\r\n        this._resizeCallbacks.push(cb);\r\n\r\n        // return unsubscribe method\r\n        return () => {\r\n            this._resizeCallbacks = this._resizeCallbacks.filter(storedCb => storedCb !== cb);\r\n        };\r\n    }\r\n\r\n    subscribeOnChange(cb) {\r\n        this._deviceChangeCallbacks.push(cb);\r\n\r\n        // return unsubscribe method\r\n        return () => {\r\n            this._deviceChangeCallbacks = this._deviceChangeCallbacks.filter(storedCb => storedCb !== cb);\r\n        };\r\n    }\r\n\r\n    is(operator, deviceName) {\r\n        switch (operator) {\r\n            case '=':\r\n                return this.isMatch(deviceName);\r\n            case '>':\r\n                return this.isGt(deviceName);\r\n            case '>=':\r\n                return this.isGe(deviceName);\r\n            case '<':\r\n                return this.isLt(deviceName);\r\n            case '<=':\r\n                return this.isLe(deviceName);\r\n            default:\r\n                throw new Error('Unexpected operator received. You can use only the following: =, >, >=, <, <=');\r\n        }\r\n    }\r\n\r\n    isMatch(deviceName) {\r\n        this._checkDeviceNameRegistered(deviceName);\r\n        return this._deviceName === deviceName;\r\n    }\r\n\r\n    isGt(deviceName) {\r\n        this._checkDeviceNameRegistered(deviceName);\r\n        return this._deviceIndex > this._getDeviceNameIndex(deviceName);\r\n    }\r\n\r\n    isGe(deviceName) {\r\n        this._checkDeviceNameRegistered(deviceName);\r\n        return this._deviceIndex >= this._getDeviceNameIndex(deviceName);\r\n    }\r\n\r\n    isLt(deviceName) {\r\n        this._checkDeviceNameRegistered(deviceName);\r\n        return this._deviceIndex < this._getDeviceNameIndex(deviceName);\r\n    }\r\n\r\n    isLe(deviceName) {\r\n        this._checkDeviceNameRegistered(deviceName);\r\n        return this._deviceIndex <= this._getDeviceNameIndex(deviceName);\r\n    }\r\n\r\n    // todo consider removing\r\n    /**\r\n     * @param {number} value - width in pixels to compare with\r\n     * @return {boolean}\r\n     */\r\n    isGeCustom(value) {\r\n        return this._isGreaterOrEqual(value);\r\n    }\r\n}\r\n\r\nexport default (new DeviceObserver());\r\n","import deviceObserver from './src/device-observer';\r\n\r\nexport { deviceObserver };"],"sourceRoot":""}