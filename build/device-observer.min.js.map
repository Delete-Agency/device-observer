{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/device-observer.js","webpack:///./index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","device_observer","DeviceObserver","_classCallCheck","this","_devices","_ascendingDevicesArray","_deviceName","_deviceIndex","_deviceChangeCallbacks","_resizeCallbacks","_debounceTimeoutId","devices","resizeDebounce","_setDevicesData","_resizeDebounce","_updateDeviceData","window","addEventListener","_onWindowResize","keys","map","deviceName","sort","a","b","length","Error","clearTimeout","setTimeout","_handleWindowResize","oldDeviceType","_invokeResize","_invokeDeviceChange","indexOf","concat","join","_this","currentDevice","_toConsumableArray","reverse","find","deviceData","_isGreaterOrEqual","forEach","cb","newDeviceType","pixelsValue","matchMedia","matches","findIndex","_this2","push","filter","storedCb","_this3","getInitialValue","arguments","undefined","operator","isMatch","isGt","isGe","isLt","isLe","_checkDeviceNameRegistered","_getDeviceNameIndex","__webpack_exports__"],"mappings":"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","file":"device-observer.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const DEFAULT_RESIZE_DEBOUNCE = 100;\r\n\r\nclass DeviceObserver {\r\n    constructor() {\r\n        this._devices = {};\r\n        this._ascendingDevicesArray = [];\r\n        this._deviceName = null;\r\n        this._deviceIndex = null;\r\n        this._deviceChangeCallbacks = [];\r\n\r\n        this._resizeCallbacks = [];\r\n        this._debounceTimeoutId = null;\r\n    }\r\n\r\n    /**\r\n     * @param {Object} devices - Collection of devices and its breakpoints from which they start\r\n     * For example: {\r\n     *   'mobile': 0,\r\n     *   'tablet': 768,\r\n     *   'desktop:' 1024,\r\n     * }\r\n     * @param resizeDebounce\r\n     */\r\n    init(devices, resizeDebounce) {\r\n        this._setDevicesData(devices);\r\n        this._resizeDebounce = resizeDebounce || DEFAULT_RESIZE_DEBOUNCE;\r\n        this._updateDeviceData();\r\n        window.addEventListener('resize', this._onWindowResize.bind(this));\r\n    }\r\n\r\n    /**\r\n     * Apply desired format and save to the private variable\r\n     * @param devices\r\n     * @private\r\n     */\r\n    _setDevicesData(devices) {\r\n        // save original devices\r\n        this._devices = devices;\r\n        // prepare an array of devices\r\n        // make sure devices are sorted by breakpoints values [['mobile', 0], ['tablet', 768], ['desktop', 1024]]\r\n        this._ascendingDevicesArray = Object.keys(devices).map((deviceName) => [deviceName, devices[deviceName]]).sort((a, b) => a[1] - b[1]);\r\n\r\n        if (this._ascendingDevicesArray.length === 0) {\r\n            throw new Error('No devices specified');\r\n        }\r\n        if (this._ascendingDevicesArray[0][1] !== 0) {\r\n            throw new Error('Smallest device name must have breakpoint equal 0');\r\n        }\r\n    }\r\n\r\n    _onWindowResize() {\r\n        if (this._debounceTimeoutId !== null) {\r\n            clearTimeout(this._debounceTimeoutId);\r\n        }\r\n\r\n        this._debounceTimeoutId = setTimeout(this._handleWindowResize.bind(this), this._resizeDebounce);\r\n    }\r\n\r\n    _handleWindowResize() {\r\n        const oldDeviceType = this._deviceName;\r\n        this._updateDeviceData();\r\n        this._invokeResize();\r\n        if (oldDeviceType !== this._deviceName) {\r\n            this._invokeDeviceChange(this._deviceName, oldDeviceType);\r\n        }\r\n    }\r\n\r\n    _checkDeviceNameRegistered(deviceName) {\r\n        if (Object.keys(this._devices).indexOf(deviceName) === -1) {\r\n            throw new Error(`Passes device name ${deviceName} was not found among registered: ${Object.keys(this._devices).join(', ')}`)\r\n        }\r\n    }\r\n\r\n    _updateDeviceData() {\r\n        // reverse array because of mobile-first\r\n        // create the new array before reverse not to mutate original one\r\n        const currentDevice = [...this._ascendingDevicesArray].reverse().find(deviceData => this._isGreaterOrEqual(deviceData[1]));\r\n        this._deviceIndex = this._ascendingDevicesArray.indexOf(currentDevice);\r\n        this._deviceName = currentDevice[0];\r\n    }\r\n\r\n    _invokeResize() {\r\n        this._resizeCallbacks.forEach(cb => cb());\r\n    }\r\n\r\n    _invokeDeviceChange(newDeviceType, oldDeviceType) {\r\n        this._deviceChangeCallbacks.forEach(cb => cb(newDeviceType, oldDeviceType));\r\n    }\r\n\r\n    _isGreaterOrEqual(pixelsValue) {\r\n        return matchMedia(`only screen and (min-width:${pixelsValue}px)`).matches;\r\n    }\r\n\r\n    _getDeviceNameIndex(deviceName) {\r\n        return this._ascendingDevicesArray.findIndex(deviceData => deviceData[0] === deviceName);\r\n    }\r\n\r\n    subscribeOnResize(cb) {\r\n        this._resizeCallbacks.push(cb);\r\n\r\n        // return unsubscribe method\r\n        return () => {\r\n            this._resizeCallbacks = this._resizeCallbacks.filter(storedCb => storedCb !== cb);\r\n        };\r\n    }\r\n\r\n    subscribeOnChange(cb, getInitialValue = false) {\r\n        this._deviceChangeCallbacks.push(cb);\r\n        if (getInitialValue) {\r\n            cb(this._deviceName);\r\n        }\r\n\r\n        // return unsubscribe method\r\n        return () => {\r\n            this._deviceChangeCallbacks = this._deviceChangeCallbacks.filter(storedCb => storedCb !== cb);\r\n        };\r\n    }\r\n\r\n    is(operator, deviceName) {\r\n        switch (operator) {\r\n            case '=':\r\n                return this.isMatch(deviceName);\r\n            case '>':\r\n                return this.isGt(deviceName);\r\n            case '>=':\r\n                return this.isGe(deviceName);\r\n            case '<':\r\n                return this.isLt(deviceName);\r\n            case '<=':\r\n                return this.isLe(deviceName);\r\n            default:\r\n                throw new Error('Unexpected operator received. You can use only the following: =, >, >=, <, <=');\r\n        }\r\n    }\r\n\r\n    isMatch(deviceName) {\r\n        this._checkDeviceNameRegistered(deviceName);\r\n        return this._deviceName === deviceName;\r\n    }\r\n\r\n    isGt(deviceName) {\r\n        this._checkDeviceNameRegistered(deviceName);\r\n        return this._deviceIndex > this._getDeviceNameIndex(deviceName);\r\n    }\r\n\r\n    isGe(deviceName) {\r\n        this._checkDeviceNameRegistered(deviceName);\r\n        return this._deviceIndex >= this._getDeviceNameIndex(deviceName);\r\n    }\r\n\r\n    isLt(deviceName) {\r\n        this._checkDeviceNameRegistered(deviceName);\r\n        return this._deviceIndex < this._getDeviceNameIndex(deviceName);\r\n    }\r\n\r\n    isLe(deviceName) {\r\n        this._checkDeviceNameRegistered(deviceName);\r\n        return this._deviceIndex <= this._getDeviceNameIndex(deviceName);\r\n    }\r\n\r\n    // todo consider removing\r\n    /**\r\n     * @param {number} value - width in pixels to compare with\r\n     * @return {boolean}\r\n     */\r\n    isGeCustom(value) {\r\n        return this._isGreaterOrEqual(value);\r\n    }\r\n}\r\n\r\nexport default (new DeviceObserver());\r\n","import deviceObserver from './src/device-observer';\r\n\r\nexport { deviceObserver };"],"sourceRoot":""}